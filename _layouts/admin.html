{% include head.html %}
<head>
    <link rel="stylesheet" href="{{ site.baseurl }}/plugins/trumbo/dist/ui/trumbowyg.css">
</head>

<body>

    {% include header.html %}
    <div class="white">
        <div class="container">
            {% if page.id %}
                <div class="col-lg-2"></div>
                <div class="col-lg-8">
                    <div class="row">
                        <div class="post">
                            <span class="metadata"><a href=""></a> :: Posted in: 
                            {% for category in page.categories %}
                                <a href="/categories/#{{ category }}">{{ category }}</a>
                            {% endfor %}
                            </span>
                            <h3 style="margin-top:0;"> {{ page.title }} </h3>
            {% endif %}

            {{ content }}

            {% if page.id %}
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    {% include footer.html %}

<!-- scripts -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="{{ site.baseurl }}/plugins/trumbo/dist/trumbowyg.js"></script>
<script src="{{ site.baseurl }}/plugins/dropzone/dropzone.js"></script>
<script>
    // Strip Variable data from uri.
    var liquidRetrievalVars = window.location.hash.split('#')[1];
    var titleClass = liquidRetrievalVars.replace(/ /g, '-').split('page')[0];
    var comicVar = liquidRetrievalVars.split('Page')[0];   

    // Hide extra data, then display for select page items.
    $('.do-not-display').hide();
    $('.comic-title').html( liquidRetrievalVars );
    $('.'+titleClass).show();

    // Append URL variables in order to populate page data.
    $('.comic-variable').attr("href", function(i, href) { return href + comicVar; });
    $('.page-variable').attr("href", function(i, href) { return href + liquidRetrievalVars; });

    // Enable Trumbo Editor.
    $.trumbowyg.svgPath = '{{ site.baseurl }}/plugins/trumbo/dist/ui/icons.svg';
    $('#editor').trumbowyg();

    // Retrieve page content based on hashed url.

    // Populate Trumbo editor with page content on Edit pages.
    /* var editorContent = '';
    $('#editor').trumbowyg('html', editorContent); */
    
    // Enable Drag-and-Drop Image 'upload.'
    $("div#image-selection").dropzone({ url: "/file/post" });
    
    // Append active class to items with page id.
    $('#{{ page.title }}').addClass('active');
</script>
</body>

</html>